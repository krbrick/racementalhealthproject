# racementalhealthproject
# Methodology
Using R as an analysis tool, many packages within it were utilized in this project. Extraction and cleaning of data required dplyr and base packages. 

For linear regression, the olm package was used. For geospatial mapping, ggplot2 was used for the interactive map, and leaflet for the static map. 

For the dashboard layout, the Shiny app was used, using the flexdashboard package. This allowed for the creation of different tabs to explore mapping, regression and correlation of suicide and demographics, regression and correlation of PTSD data, a visualization of the PTSD dataset, and a text page with a data narrative. 

Finally, github was used to host the website. To maintain a connection to github, github desktop was used to upload files and amend files to reflect current changes.

To reproduce this code, the repository may be cloned from https://github.com/krbrick/racementalhealthproject, or code may be easily copied and pasted from the repository’s code tab. 
 # Data
The PTSD dataset consists of meta findings of multiples studies. Different PTSD studies use different criteria to measure their efficacy, so standardizing their outcomes is a monumental and philosophical task. For instances, some studies may use a clinically administered PTSD scale (CAPS), a self-administered impact of events scale (IES) or PTSD checklist (PCL). Studies may have utilized psychotherapy, rapid eye movement, pharmaceuticals alone or in combination. 

This dataset alone could have sufficed as the subject for this project. Because this project focuses on race and housing demographics, participant demographics and outcomes measured in effect size, diagnostic change, clinically meaningful response, and score difference were chosen for regression analysis. Effect size describes the magnitude of effect a certain treatment is found to have. Diagnostic change describes a change in diagnosis of participants. Score difference indicates the change in score measurement of PTSD on psychological standardized assessment. Clinically meaningful response indicates a large change considered meaningful to clinicians and patients. Because the dataset utilized was so large and complex, a visualization of the data layout was included in the dashboard.

United States Census Bureau (2020) data was chosen because it is the most recent and comprehensive demographic data available. The files hosted by the US census are separated by state, and those files are separated into three components that must be joined together. The R code required to join these datasets together to create one complete state dataset are provided by the US Census website (United States Census Bureau, 2020). The state files then had to be joined together using dplyr. From these files, county code, state identifier, and demographics were selected. Because variable names in the original files were named according to a coding process, select variables were re-named using the data dictionary provided by the U.S. Census (U.S. Bureau of Commerce & US Census Bureau, 2021). 
 The demographics chosen included White, Black or African, Hispanic or Latino, Asian, Native Hawaiian and other Pacific Islander, Native American or Alaskan Native, and, biracial (or of multi-racial descent) and ‘some other race’. ‘Some other race’ was chosen because it comprised a category that was not addressed by other categories. This category may contain many of those who are of refugee status, which is may be a contributor to suicide and PTSD, as stated earlier in this paper. 

Suicide data was culled using the CDC WONDER tool (Compressed Mortality File, 2017). This tool allows users to request data at a variety of units of analysis. Tract level data analysis would provide a more granular interpretation and more visually pleasing mapping, but the smallest unit of analysis for suicide data is at the county level. Because type of death is recorded at the county level, this limits the unit of analysis. The data for suicide included total deaths by suicide and crude rate of suicide (deaths by suicide per 100,000 population) for the years 1999 - 2016. This project was originally intended to represent one city, Boston, Massachusetts. Because of the limitation of the unit of analysis, the project was expanded to include more counties on the East coast. This allows for a greater resolution in mapping visualizations and for stronger statistical analyses. 

Data for PTSD diagnoses at the county level is not publicly available (to the writer’s knowledge). This data is not recorded by the US Census, is not listed on causes of death, and data collected on PTSD that would include geographical information for the participants is included in documents that presumably include private health information, such as intake forms at psychiatric treatment facilities and participant information in clinical trials. Because of this, the two datasets cannot be linked. Regression analysis must be separate, and mapping is not possible for PTSD data. 
However, because this project focuses on the intersection of PTSD, suicide and race, the analyses of the two datasets are both included. Because some variables in the PTSD dataset interact with each other (male percentage is directly correlated with female percentage, and vice versa), these two variables cannot be included in the same linear regression model. However, suicide data and US census data both included county codes. These county codes were used to merge the two datasets, as well as the shapefiles that were used for mapping.

As with any data project culled from publicly available online sources, coding was a process of trial and error. Databases were downloaded at the wrong level, in the wrong order and format, and joined together many times in the wrong way. The Census data was originally downloaded with variables as characters, which caused numerous problems in the formation of the data dashboard and regression tables, so they had to be transformed, for technical reasons not suitable for discussion here (but easily researched on stackoverflow and other R problem crowdsourcing sites), by unlisting the vectors, commanding as.numeric(as.character()), using dplyr and lapply (a function that mutates dataframe vectors individually). For reasons related to data transformation and joining, no crossover data for the state of Connecticut was included in this project, although suicide and census data was downloaded for the state. 

At the end of the data extraction and renaming process for suicide and census demographics, a shapefile including this information was created and saved to github. This file was then used as one dataset, from which the RMD file for the dashboard was coded. Because dashboards are hosted, the response and download time would be greatly increased if this was not done. 
